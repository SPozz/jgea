findall((Id,Inp),input(Id,Inp),Edges),random_member((ID,INPUT_LIST),Edges),edge(Source,Target,ID),random_member(INPUT,INPUT_LIST),subtract(INPUT_LIST,[INPUT],NEW_INPUT_LIST),retract(input(ID,INPUT_LIST)),length(NEW_INPUT_LIST, LEN),(  LEN == 0,    retract(edge(Source,Target,ID)),    retract(edge_id(ID));    assert(input(ID,NEW_INPUT_LIST))),findall(N,(node_id(N), N \= Target), NODES),random_member(NewTarget,NODES),(   edge(Source,NewTarget,Id2),    input(Id2,Inputs2),    append(Inputs2,[INPUT],NewInputs2),    retract(input(Id2,Inputs2)),    assert(input(Id2,NewInputs2));    gensym(edg,NewId),    assert(edge_id(NewId)),    assert(edge(Source,NewTarget,NewId)),    assert(input(NewId,[INPUT]))       ).